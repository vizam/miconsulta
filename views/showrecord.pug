extends layout
block head
  link(rel='stylesheet' href='/stylesheets/mystyles.css')
  script(src='/javascripts/gui.js')
block content
  //Navigation bar
  div.w3-bar.w3-theme.w3-large.noprint(style='position: sticky; top: 0')
    a.w3-bar-item.w3-button.w3-hover-white(href="/")
      span.fas.fa-home
    span.w3-bar-item.w3-wide Historia Clínica
    a.w3-bar-item.w3-button.w3-right.w3-hover-white(href="#")
      span.fas.fa-sign-out-alt
    a.w3-bar-item.w3-button.w3-right.w3-hover-white(href="/ajustes")
      span.fas.fa-user-cog
    a.w3-bar-item.w3-button.w3-right.w3-hover-white(
    href="javascript: void(0)" onclick='print()')
      span.fas.fa-print
    a.w3-bar-item.w3-button.w3-right.w3-hover-white(
    href="/records")
      span.fas.fa-search
    a.w3-bar-item.w3-button.w3-right.w3-hover-white(
    href="javascript: void(0)"
    onclick='document.getElementById("modalInput").style.display = "block"')
      span.fas.fa-pen
  // Some code
  - 
    let hoy = new Date();
    const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio',
      'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
  // Content
  div.w3-content.w3-padding.w3-theme-l3
    h1.w3-right-align.print Informe Médico
    h6.w3-right-align.print Fecha de elaboración: #{`${hoy.getDate()}-${meses[hoy.getMonth()]}-${hoy.getFullYear()}`}
    ul.w3-ul.w3-large
      li
        span.fas.fa-fingerprint
        span.w3-margin #{id}
      li
        span.fas.fa-user
        span.w3-margin #{nombre}&nbsp;#{apellido}
      li
        span.fas.fa-birthday-cake
        span.w3-margin #{edad} a
      li
        span.fas.fa-phone
        span.w3-margin #{tel} 
    div#divNotas
      - for (let x = 0; x < notas.length; x++)
        - let fecha = new Date(notas[x].stamp);
        div(style='display: none')
          span.w3-tag.w3-theme.w3-animate-right.noprint #{ `${fecha.getDate()}-${meses[fecha.getMonth()]}-${fecha.getFullYear()}` }
          span.print Fecha de evaluación: #{ `${fecha.getDate()}-${meses[fecha.getMonth()]}-${fecha.getFullYear()}` }   
          h4 Enfermedad Actual
          p(style="text-indent: 10pt") #{ notas[x].enfactual }
          h4 Antecedentes
          p #{antecedentes}
          h4 Examen Físico
          p #{ notas[x].exfisico }
          h4 Exámenes Complementarios
          p #{ notas[x].excomple }
          h4 Diagnósticos
          p #{ notas[x].diagnosticos }
          h4 Tratamiento
          p #{ notas[x].tratamiento }
    br
    br
  // Pagination of notes
  div#paginador.w3-bar.w3-center.noprint(onclick='cambiarPagina(event)' style="position: fixed; bottom: 20px;")
      - for (let x = 0; x < notas.length ; x++)
        a.w3-button.w3-hover-white(href='javascript: void(0)') #{x+1}
  
  script.
    window.onload = paginarNotas;
    window.beforeprint = poblarInforme;
    document.onkeydown = appKeys;

  include modalform.pug

  include pieinforme.pug