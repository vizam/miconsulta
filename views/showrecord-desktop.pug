extends layout
block head
  link(rel='stylesheet' href='/stylesheets/mystyles.css')
  script(src='/javascripts/gui.js')
block content
  //Navigation bar
  div.w3-bar.w3-theme-dark.w3-large.noprint(style='position: sticky; top: 0')
    a.w3-bar-item.w3-button(href="/")
      span.fas.fa-home
    span.w3-bar-item.w3-wide Historia Clínica
    a.w3-bar-item.w3-button.w3-right(href="#")
      span.fas.fa-sign-out-alt
    a.w3-bar-item.w3-button.w3-right(href="/ajustes")
      span.fas.fa-user-cog
    
  // Some code
  - 
    let hoy = new Date();
    const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio',
      'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
  // Side Bar
  div.w3-bar-block.w3-sidebar.w3-theme-l4(style="width:25%")
    ul.w3-ul.w3-large
      li
        span.fas.fa-fingerprint
        span.w3-margin #{id}
      li
        span.fas.fa-user
        span.w3-margin #{nombre}&nbsp;#{apellido}
      li
        span.fas.fa-birthday-cake
        span.w3-margin #{edad} a
    div.w3-container
      h4.w3-wide(style='border-bottom: solid 1px') Menú
    a.w3-bar-item.w3-button.w3-text-theme.w3-hover-theme(href="/records")
      span.w3-margin-right.fas.fa-search
      span Buscar Paciente
    a.w3-bar-item.w3-button.w3-text-theme.w3-hover-theme(
      href="#"
      onclick='document.getElementById("modalInput").style.display = "block"')
      span.w3-margin-right.fas.fa-pen
      span Agregar Nota
    a.w3-bar-item.w3-button.w3-text-theme.w3-hover-theme(
      href="javascript: void(0)" onclick='print()')
      span.w3-margin-right.fas.fa-print
      span Imprimir Reporte
    a.w3-bar-item.w3-button.w3-text-theme.w3-hover-theme(href="#")
      span.w3-margin-right.fas.fa-phone
      span Contactar
  // Main Section
  div.w3-container.w3-theme-l3(style="margin-left:25%; height: 100% ")
    // Patient notes
    div#divNotas
      - for (let x = 0; x < notas.length; x++)
        - let fecha = new Date(notas[x].stamp);
        div(style='display: none')
          span.w3-tag.w3-green #{ `${fecha.getDate()}-${meses[fecha.getMonth()]}-${fecha.getFullYear()}` }   
          h2 Enfermedad Actual
          p.w3-large(style="text-indent: 10pt") #{ notas[x].enfactual }
          h2 Antecedentes
          p #{antecedentes}
          h2 Examen Físico
          p #{ notas[x].exfisico }
          h2 Exámenes Complementarios
          p #{ notas[x].excomple }
          h2 Diagnósticos
          p #{ notas[x].diagnosticos }
          h2 Tratamiento
          p #{ notas[x].tratamiento }
    // Pagination of notes
    div#paginador.w3-bar.w3-center(onclick='cambiarPagina(event)' style="position: fixed; bottom: 20px; left: 25%; width: 75%")
        - for (let x = 0; x < notas.length ; x++)
          a.w3-button(href='javascript: void(0)') #{x+1}
  
  script.
    window.onload = paginarNotas;
    window.beforeprint = poblarInforme;
    document.onkeydown = appKeys;

  include modalform.pug

  include informe.pug